<!-- Hero Section -->
<section class="relative h-[600px] flex items-center overflow-hidden">
  <!-- Background Image with Overlay -->
  <div class="absolute inset-0 z-0">
    <img ngSrc="assets/images/franek3.webp" alt="Résidence Claire Franek" fill priority class="object-cover">
    <div class="absolute inset-0 bg-gradient-to-r from-primary-dark/90 to-primary/80 mix-blend-multiply"></div>
  </div>

  <!-- Content -->
  <div class="container-custom relative z-10 text-white">
    <div class="max-w-3xl" data-aos="fade-up" data-aos-duration="1000">
      <span
        class="inline-block py-1 px-3 rounded-full bg-white/20 backdrop-blur-sm border border-white/30 text-sm font-medium mb-6 animate-fade-in-left">
        Bienvenue sur votre portail
      </span>
      <h1 class="text-5xl md:text-7xl font-bold mb-6 leading-tight">
        Association des <br />
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-white">Locataires</span>
      </h1>
      <p class="text-xl md:text-2xl text-gray-200 mb-10 max-w-2xl font-light">
        Résidence Claire Franek — Ensemble pour améliorer notre cadre de vie, défendre nos intérêts et créer du lien.
      </p>

      <div class="flex flex-col sm:flex-row gap-4">
        <button (click)="scrollToSection('about')" class="btn-primary flex items-center justify-center gap-2 group">
          <span>Découvrir l'association</span>
          <i class="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
        </button>
        <button (click)="scrollToSection('latest-news')"
          class="px-8 py-3 rounded-xl font-medium border-2 border-white/30 text-white hover:bg-white/10 hover:border-white transition-all backdrop-blur-sm">
          Voir les actualités
        </button>
      </div>
    </div>
  </div>

  <!-- Decorative Elements -->
  <div class="absolute bottom-0 left-0 w-full h-24 bg-gradient-to-t from-gray-50 to-transparent"></div>
</section>

<!-- Stats Section -->
<section class="relative -mt-20 z-20 pb-20">
  <div class="container-custom">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      <!-- Stat Card 1 -->
      <div class="bg-white p-6 rounded-2xl shadow-hard transform hover:-translate-y-1 transition-all duration-300"
        data-aos="fade-up" data-aos-delay="0">
        <div class="flex items-center justify-between mb-4">
          <div class="w-12 h-12 bg-blue-50 text-brand-blue rounded-xl flex items-center justify-center text-xl">
            <i class="fa-solid fa-users"></i>
          </div>
          <span class="text-green-500 font-bold text-sm bg-green-50 px-2 py-1 rounded-lg">+12%</span>
        </div>
        <h3 class="text-3xl font-bold text-gray-900 mb-1">{{ stats.totalMembers }}</h3>
        <p class="text-gray-500 font-medium">Membres Actifs</p>
      </div>

      <!-- Stat Card 2 -->
      <div class="bg-white p-6 rounded-2xl shadow-hard transform hover:-translate-y-1 transition-all duration-300"
        data-aos="fade-up" data-aos-delay="100">
        <div class="flex items-center justify-between mb-4">
          <div class="w-12 h-12 bg-purple-50 text-purple-600 rounded-xl flex items-center justify-center text-xl">
            <i class="fa-solid fa-tools"></i>
          </div>
          <span class="text-gray-400 text-xs font-medium">En cours</span>
        </div>
        <h3 class="text-3xl font-bold text-gray-900 mb-1">{{ stats.activeProjects }}</h3>
        <p class="text-gray-500 font-medium">Projets Associatifs</p>
      </div>

      <!-- Stat Card 3 -->
      <div class="bg-white p-6 rounded-2xl shadow-hard transform hover:-translate-y-1 transition-all duration-300"
        data-aos="fade-up" data-aos-delay="200">
        <div class="flex items-center justify-between mb-4">
          <div class="w-12 h-12 bg-orange-50 text-orange-500 rounded-xl flex items-center justify-center text-xl">
            <i class="fa-solid fa-calendar"></i>
          </div>
          <span class="text-orange-500 font-bold text-sm bg-orange-50 px-2 py-1 rounded-lg">Bientôt</span>
        </div>
        <h3 class="text-3xl font-bold text-gray-900 mb-1">{{ stats.upcomingEvents }}</h3>
        <p class="text-gray-500 font-medium">Événements</p>
      </div>

      <!-- Stat Card 4 -->
      <div class="bg-white p-6 rounded-2xl shadow-hard transform hover:-translate-y-1 transition-all duration-300"
        data-aos="fade-up" data-aos-delay="300">
        <div class="flex items-center justify-between mb-4">
          <div class="w-12 h-12 bg-red-50 text-red-500 rounded-xl flex items-center justify-center text-xl">
            <i class="fa-solid fa-bullhorn"></i>
          </div>
          <span class="text-red-500 font-bold text-sm bg-red-50 px-2 py-1 rounded-lg">!</span>
        </div>
        <h3 class="text-3xl font-bold text-gray-900 mb-1">{{ stats.announcements }}</h3>
        <p class="text-gray-500 font-medium">Annonces</p>
      </div>
    </div>
  </div>
</section>

<!-- Video Presentation Section -->
<section class="py-16 bg-white overflow-hidden">
  <div class="container-custom">
    <div class="flex flex-col lg:flex-row items-center gap-12">
      <!-- Text Content -->
      <div class="lg:w-1/2" data-aos="fade-right">
        <h4 class="text-brand-blue font-bold uppercase tracking-wider text-sm mb-2">Réseaux Sociaux</h4>
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">Notre dernière vidéo</h2>
        <p class="text-gray-600 text-lg mb-6 leading-relaxed">
          Retrouvez nos actualités, nos événements et la vie de la résidence en vidéo sur nos chaînes TikTok et YouTube.
          Abonnez-vous pour ne rien manquer !
        </p>
        <div class="flex flex-col gap-4">
          <div class="flex items-start gap-3">
            <div class="w-6 h-6 rounded-full bg-black flex items-center justify-center text-white mt-1 flex-shrink-0">
              <i class="fa-brands fa-tiktok text-xs"></i>
            </div>
            <div>
              <a href="https://www.tiktok.com/@nosmalheursresidence" target="_blank"
                class="font-bold text-gray-900 hover:text-brand-blue transition-colors">Sur TikTok</a>
              <p class="text-sm text-gray-500">Des formats courts et dynamiques au quotidien.</p>
            </div>
          </div>
          <div class="flex items-start gap-3">
            <div class="w-6 h-6 rounded-full bg-red-600 flex items-center justify-center text-white mt-1 flex-shrink-0">
              <i class="fa-brands fa-youtube text-xs"></i>
            </div>
            <div>
              <h5 class="font-bold text-gray-900">Sur YouTube</h5>
              <p class="text-sm text-gray-500">Les reportages complets et replays d'événements.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Video Wrapper -->
      <div class="lg:w-1/2 w-full" data-aos="fade-left">
        <!-- We link the whole container to the TikTok profile since we don't have a specific video ID yet -->
        <a href="https://www.tiktok.com/@nosmalheursresidence" target="_blank"
          class="block relative rounded-2xl overflow-hidden shadow-2xl group cursor-pointer aspect-video">

          <!-- Placeholder Cover -->
          <div class="absolute inset-0 bg-gray-900">
            <img src="assets/images/franek3.webp" alt="Video Cover"
              class="w-full h-full object-cover opacity-60 group-hover:opacity-40 transition-opacity duration-300">

            <!-- Play Button -->
            <div class="absolute inset-0 flex items-center justify-center">
              <div
                class="w-20 h-20 bg-black/50 backdrop-blur-sm border border-white/20 rounded-full flex items-center justify-center shadow-lg transform group-hover:scale-110 transition-transform duration-300">
                <i class="fa-brands fa-tiktok text-white text-3xl"></i>
              </div>
            </div>

            <!-- Overlay Text -->
            <div class="absolute bottom-0 left-0 p-6 w-full bg-gradient-to-t from-black/80 to-transparent">
              <span class="text-white font-medium flex items-center gap-2">
                <i class="fa-solid fa-play-circle"></i> Voir notre dernière vidéo sur TikTok
              </span>
            </div>
          </div>
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Latest News Section -->
<section id="latest-news" class="py-20 bg-white">
  <div class="container-custom">
    <!-- Section Header -->
    <div class="flex flex-col md:flex-row justify-between items-end mb-12" data-aos="fade-up">
      <div class="max-w-2xl">
        <h4 class="text-brand-blue font-bold uppercase tracking-wider text-sm mb-2">Actualités</h4>
        <h2 class="text-4xl font-bold text-gray-900 mb-4">Dernières nouvelles de la résidence</h2>
        <p class="text-gray-600 text-lg">Tenez-vous informé des décisions, des événements et de la vie de notre
          communauté.</p>
      </div>
      <button
        (click)="navigateTo('/actualites')"
        class="hidden md:flex items-center gap-2 text-brand-blue font-bold hover:text-blue-700 transition-colors mt-4 md:mt-0 cursor-pointer">
        Toutes les actualités <i class="fa-solid fa-arrow-right"></i>
      </button>
    </div>

    <!-- News Grid -->
    <div class="grid md:grid-cols-3 gap-8" *ngIf="news.length > 0; else noNews">
      <article *ngFor="let article of news; let i = index"
        class="group bg-white rounded-2xl overflow-hidden border border-gray-100 hover:shadow-hard transition-all duration-300 transform hover:-translate-y-2 h-full flex flex-col"
        [attr.data-aos]="'fade-up'" [attr.data-aos-delay]="i * 100">

        <!-- Image -->
        <div class="relative h-64 overflow-hidden">
          <img [ngSrc]="article.imageUrl || 'assets/images/franek3.webp'" [alt]="article.title" fill
            class="object-cover transition-transform duration-700 group-hover:scale-110">
          <div class="absolute top-4 left-4">
            <span class="px-3 py-1 bg-white/90 backdrop-blur-md rounded-lg text-sm font-bold text-gray-900 shadow-sm">
              {{ formatDate(article.publishedAt) | date:'dd MMM' }}
            </span>
          </div>
        </div>

        <!-- Content -->
        <div class="p-6 flex-1 flex flex-col">
          <div class="flex items-center gap-2 mb-3 text-sm text-gray-500">
            <i class="fa-solid fa-tag text-brand-blue"></i>
            <span>Association</span>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3 group-hover:text-brand-blue transition-colors">
            {{ article.title }}
          </h3>
          <p class="text-gray-600 mb-6 flex-1 line-clamp-3">
            {{ article.content }}
          </p>

          <button
            (click)="openNewsDetail(article)"
            class="flex items-center justify-between w-full p-3 rounded-xl bg-gray-50 group-hover:bg-brand-blue group-hover:text-white transition-colors cursor-pointer">
            <span class="font-medium text-sm">Lire la suite</span>
            <i class="fa-solid fa-arrow-right text-xs"></i>
          </button>
        </div>
      </article>
    </div>

    <ng-template #noNews>
      <div class="text-center py-24 bg-gray-50 rounded-3xl border border-gray-100">
        <div
          class="w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-6 text-gray-400 text-3xl">
          <i class="fa-solid fa-newspaper"></i>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2">Aucune actualité pour le moment</h3>
        <p class="text-gray-500">Revenez plus tard pour voir les dernières informations.</p>
      </div>
    </ng-template>

    <!-- News Detail Modal -->
    <div *ngIf="showDetailModal && selectedNews" 
         class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm" 
         (click)="closeDetailModal()">
      <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto" 
           (click)="$event.stopPropagation()">
        <!-- Modal Header -->
        <div class="sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between z-10">
          <div class="flex-1">
            <div class="flex items-center gap-3 mb-2">
              <span class="px-3 py-1 bg-brand-blue/10 text-brand-blue rounded-full text-xs font-semibold uppercase">
                {{ getCategoryLabel(selectedNews.category) }}
              </span>
              <span class="text-sm text-gray-500">{{ formatDate(selectedNews.publishedAt) }}</span>
            </div>
            <h2 class="text-2xl font-bold text-gray-800">{{ selectedNews.title }}</h2>
          </div>
          <button (click)="closeDetailModal()" class="text-gray-400 hover:text-gray-600 transition-colors ml-4">
            <i class="fa-solid fa-times text-2xl"></i>
          </button>
        </div>

        <!-- Modal Body -->
        <div class="p-6">
          <!-- Image -->
          <div *ngIf="selectedNews.imageUrl" class="mb-6 rounded-xl overflow-hidden">
            <img [src]="selectedNews.imageUrl" [alt]="selectedNews.title" class="w-full h-auto max-h-96 object-cover">
          </div>

          <!-- Author Info -->
          <div class="mb-6 p-4 bg-gray-50 rounded-xl">
            <div class="flex items-center gap-2 text-sm text-gray-600">
              <i class="fas fa-user text-brand-blue"></i>
              <span><strong>Publié par:</strong> {{ selectedNews.author }}</span>
            </div>
          </div>

          <!-- Content -->
          <div class="mb-6">
            <div class="prose max-w-none">
              <p class="text-gray-700 whitespace-pre-line leading-relaxed text-lg">{{ selectedNews.content }}</p>
            </div>
          </div>

          <!-- Video Link -->
          <div *ngIf="selectedNews.videoUrl" class="mb-6 p-4 bg-blue-50 rounded-xl border border-blue-200">
            <a
              [href]="selectedNews.videoUrl"
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-3 text-brand-blue hover:text-blue-700 font-semibold text-lg">
              <i class="fas fa-video text-2xl"></i>
              <span>Voir la vidéo associée</span>
              <i class="fas fa-external-link-alt text-sm"></i>
            </a>
          </div>

          <!-- Footer -->
          <div class="pt-6 border-t border-gray-200 flex items-center justify-between">
            <div class="text-sm text-gray-500">
              <i class="fas fa-calendar me-2"></i>
              Publié le {{ formatDate(selectedNews.publishedAt) }}
            </div>
            <button
              (click)="closeDetailModal()"
              class="px-6 py-2 bg-brand-blue text-white rounded-lg font-medium hover:bg-blue-700 transition-colors">
              Fermer
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="mt-8 text-center md:hidden">
      <button (click)="navigateTo('/actualites')" class="btn-secondary w-full">
        Toutes les actualités
      </button>
    </div>
  </div>
</section>

<!-- Upcoming Events Section -->
<section id="events" class="py-20 bg-gray-50">
  <div class="container-custom">
    <!-- Section Header -->
    <div class="flex flex-col md:flex-row justify-between items-end mb-12" data-aos="fade-up">
      <div class="max-w-2xl">
        <h4 class="text-brand-blue font-bold uppercase tracking-wider text-sm mb-2">Événements</h4>
        <h2 class="text-4xl font-bold text-gray-900 mb-4">Prochains événements</h2>
        <p class="text-gray-600 text-lg">Découvrez les événements organisés par l'association et participez à la vie de la résidence.</p>
      </div>
      <button
        (click)="navigateTo('/evenements')"
        class="hidden md:flex items-center gap-2 text-brand-blue font-bold hover:text-blue-700 transition-colors mt-4 md:mt-0 cursor-pointer">
        Tous les événements <i class="fa-solid fa-arrow-right"></i>
      </button>
    </div>

    <!-- Events Grid -->
    <div class="grid md:grid-cols-3 gap-8" *ngIf="events.length > 0; else noEvents">
      <article *ngFor="let event of events; let i = index"
        class="group bg-white rounded-2xl overflow-hidden border border-gray-100 hover:shadow-hard transition-all duration-300 transform hover:-translate-y-2 h-full flex flex-col cursor-pointer"
        [attr.data-aos]="'fade-up'" [attr.data-aos-delay]="i * 100"
        (click)="openEventDetail(event)">

        <!-- Image -->
        <div class="relative h-64 overflow-hidden">
          <img 
            [src]="event.imageUrl || 'assets/images/franek3.webp'" 
            [alt]="event.title" 
            class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
          <div class="absolute top-4 left-4">
            <span class="px-3 py-1 bg-white/90 backdrop-blur-md rounded-lg text-sm font-bold text-gray-900 shadow-sm">
              {{ formatDate(event.startDate) | date:'dd MMM' }}
            </span>
          </div>
        </div>

        <!-- Content -->
        <div class="p-6 flex-1 flex flex-col">
          <div class="flex items-center gap-2 mb-3 text-sm text-gray-500">
            <i class="fa-solid fa-map-marker-alt text-brand-blue"></i>
            <span>{{ event.location }}</span>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3 group-hover:text-brand-blue transition-colors">
            {{ event.title }}
          </h3>
          <p class="text-gray-600 mb-6 flex-1 line-clamp-3">
            {{ event.description }}
          </p>

          <!-- Participants -->
          <div *ngIf="event.maxParticipants" class="mb-4">
            <div class="flex items-center justify-between text-sm text-gray-600 mb-2">
              <span>Participants</span>
              <span>{{ event.currentParticipants || 0 }}/{{ event.maxParticipants }}</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
              <div class="bg-brand-blue h-2 rounded-full transition-all"
                [style.width.%]="((event.currentParticipants || 0) / event.maxParticipants) * 100">
              </div>
            </div>
          </div>

          <button
            class="flex items-center justify-between w-full p-3 rounded-xl bg-gray-50 group-hover:bg-brand-blue group-hover:text-white transition-colors">
            <span class="font-medium text-sm">Voir les détails</span>
            <i class="fa-solid fa-arrow-right text-xs"></i>
          </button>
        </div>
      </article>
    </div>

    <ng-template #noEvents>
      <div class="text-center py-24 bg-white rounded-3xl border border-gray-100">
        <div
          class="w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-6 text-gray-400 text-3xl">
          <i class="fa-solid fa-calendar"></i>
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2">Aucun événement à venir</h3>
        <p class="text-gray-500">Revenez plus tard pour voir les prochains événements.</p>
      </div>
    </ng-template>

    <div class="mt-8 text-center md:hidden">
      <button (click)="navigateTo('/evenements')" class="btn-secondary w-full">
        Tous les événements
      </button>
    </div>
  </div>
</section>

<!-- Event Detail Modal -->
<div *ngIf="showEventDetailModal && selectedEvent" 
     class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm" 
     (click)="closeEventDetailModal()">
  <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto" 
       (click)="$event.stopPropagation()">
    <!-- Modal Header -->
    <div class="sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between z-10">
      <div class="flex-1">
        <h2 class="text-2xl font-bold text-gray-800">{{ selectedEvent.title }}</h2>
      </div>
      <button (click)="closeEventDetailModal()" class="text-gray-400 hover:text-gray-600 transition-colors ml-4">
        <i class="fa-solid fa-times text-2xl"></i>
      </button>
    </div>

    <!-- Modal Body -->
    <div class="p-6">
      <!-- Image -->
      <div *ngIf="selectedEvent.imageUrl" class="mb-6 rounded-xl overflow-hidden">
        <img [src]="selectedEvent.imageUrl" [alt]="selectedEvent.title" class="w-full h-auto max-h-96 object-cover">
      </div>

      <!-- Event Info -->
      <div class="mb-6 grid md:grid-cols-2 gap-4">
        <div class="p-4 bg-gray-50 rounded-xl">
          <div class="flex items-center gap-2 text-sm text-gray-600 mb-1">
            <i class="fas fa-calendar text-brand-blue"></i>
            <span><strong>Date:</strong></span>
          </div>
          <p class="text-gray-900 font-medium">{{ formatDate(selectedEvent.startDate) }}</p>
        </div>
        <div class="p-4 bg-gray-50 rounded-xl">
          <div class="flex items-center gap-2 text-sm text-gray-600 mb-1">
            <i class="fas fa-map-marker-alt text-brand-blue"></i>
            <span><strong>Lieu:</strong></span>
          </div>
          <p class="text-gray-900 font-medium">{{ selectedEvent.location }}</p>
        </div>
      </div>

      <!-- Description -->
      <div class="mb-6">
        <p class="text-gray-700 whitespace-pre-line leading-relaxed text-lg">{{ selectedEvent.description }}</p>
      </div>

      <!-- Footer -->
      <div class="pt-6 border-t border-gray-200">
        <button
          (click)="closeEventDetailModal()"
          class="px-6 py-2 bg-brand-blue text-white rounded-lg font-medium hover:bg-blue-700 transition-colors">
          Fermer
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Call to Action -->
<section class="py-20 bg-brand-blue/5">
  <div class="container-custom">
    <div
      class="bg-gradient-primary rounded-3xl p-10 md:p-16 text-center text-white relative overflow-hidden shadow-hard"
      data-aos="zoom-in">

      <!-- Decorative circles -->
      <div class="absolute top-0 left-0 w-64 h-64 bg-white/10 rounded-full -translate-x-1/2 -translate-y-1/2"></div>
      <div class="absolute bottom-0 right-0 w-96 h-96 bg-white/10 rounded-full translate-x-1/3 translate-y-1/3"></div>

      <div class="relative z-10 max-w-3xl mx-auto">
        <h2 class="text-3xl md:text-5xl font-bold mb-6">Rejoignez-nous !</h2>
        <p class="text-lg md:text-xl text-blue-100 mb-8 font-light">
          Participez à la vie de votre résidence, proposez des projets et restez informé. Votre voix compte pour
          améliorer notre quotidien.
        </p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          <button (click)="navigateTo('/inscription')"
            class="px-8 py-4 bg-white text-brand-blue rounded-xl font-bold shadow-lg hover:shadow-xl hover:bg-gray-50 transition-all transform hover:-translate-y-1">
            Devenir Adhérent
          </button>
          <button (click)="navigateTo('/contact')"
            class="px-8 py-4 bg-brand-blue border-2 border-white/20 text-white rounded-xl font-bold hover:bg-brand-blue/80 transition-all">
            Nous Contacter
          </button>
        </div>
      </div>
    </div>
  </div>
</section>