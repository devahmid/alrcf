<!-- Contact Section -->
<section id="contact" class="py-20 bg-gray-50">
  <div class="container-custom">
    <!-- Header -->
    <div class="text-center mb-16" data-aos="fade-up">
      <h2 class="text-4xl font-bold text-gray-900 mb-4">Contactez-Nous</h2>
      <p class="text-gray-600 max-w-2xl mx-auto text-lg">
        Nous sommes là pour vous écouter, vous informer et répondre à toutes vos questions.
      </p>
    </div>

    <div class="grid lg:grid-cols-2 gap-8 lg:gap-12">
      <!-- Contact Information & Permanences -->
      <div class="space-y-8">
        <!-- Info Card -->
        <div
          class="bg-white rounded-2xl shadow-soft p-8 border border-gray-100 transform transition-all hover:translate-y-[-5px]"
          data-aos="fade-up" data-aos-delay="100">
          <h3 class="text-2xl font-bold text-gray-900 mb-8 border-b border-gray-100 pb-4">
            Informations de Contact
          </h3>

          <div class="space-y-6">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 bg-blue-50 text-brand-blue rounded-xl flex items-center justify-center shrink-0">
                <i class="fa-solid fa-map-marker-alt text-xl"></i>
              </div>
              <div>
                <p class="font-bold text-gray-900 mb-1">Notre Adresse</p>
                <p class="text-gray-600 leading-relaxed">
                  Résidence Claire Franek<br>
                  39 Avenue Rosa Luxemburg<br>
                  94600 Choisy-le-Roi
                </p>
              </div>
            </div>

            <div class="flex items-start gap-4">
              <div class="w-12 h-12 bg-blue-50 text-brand-blue rounded-xl flex items-center justify-center shrink-0">
                <i class="fa-solid fa-phone text-xl"></i>
              </div>
              <div>
                <p class="font-bold text-gray-900 mb-1">Téléphone</p>
                <p class="text-gray-600 hover:text-brand-blue transition-colors">00 00 00 00 00</p>
              </div>
            </div>

            <div class="flex items-start gap-4">
              <div class="w-12 h-12 bg-blue-50 text-brand-blue rounded-xl flex items-center justify-center shrink-0">
                <i class="fa-solid fa-envelope text-xl"></i>
              </div>
              <div>
                <p class="font-bold text-gray-900 mb-1">Email</p>
                <a href="mailto:contact&#64;alrcf.fr"
                  class="text-gray-600 hover:text-brand-blue transition-colors">contact&#64;alrcf.fr</a>
              </div>
            </div>
          </div>
        </div>

        <!-- Permanences Card -->
        <div class="bg-gradient-primary text-white rounded-2xl shadow-hard p-8 relative overflow-hidden"
          data-aos="fade-up" data-aos-delay="200">
          <div class="absolute top-0 right-0 p-6 opacity-10">
            <i class="fa-solid fa-clock text-8xl"></i>
          </div>

          <h3 class="text-2xl font-bold mb-6 relative z-10">Nos Permanences</h3>
          <p class="text-blue-100 mb-6 relative z-10">Venez nous rencontrer au local associatif :</p>

          <div class="space-y-3 relative z-10">
            <div
              class="flex justify-between items-center bg-white/10 backdrop-blur-sm p-4 rounded-xl border border-white/20">
              <span class="font-medium">Mardi</span>
              <span class="font-bold">18h00 - 20h00</span>
            </div>
            <div
              class="flex justify-between items-center bg-white/10 backdrop-blur-sm p-4 rounded-xl border border-white/20">
              <span class="font-medium">Jeudi</span>
              <span class="font-bold">18h00 - 20h00</span>
            </div>
            <div
              class="flex justify-between items-center bg-white/10 backdrop-blur-sm p-4 rounded-xl border border-white/20">
              <span class="font-medium">Samedi</span>
              <span class="font-bold">10h00 - 12h00</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact Form -->
      <div class="bg-white rounded-2xl shadow-hard p-8 border border-gray-100 h-fit" data-aos="fade-up"
        data-aos-delay="300">
        <h3 class="text-2xl font-bold text-gray-900 mb-6">Envoyez-nous un message</h3>

        <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="space-y-6">
          <!-- Success/Error Message -->
          <div *ngIf="submitMessage" class="p-4 rounded-xl flex items-start gap-3" [class.bg-green-50]="submitSuccess"
            [class.text-green-700]="submitSuccess" [class.border-green-200]="submitSuccess"
            [class.border]="submitSuccess" [class.bg-red-50]="!submitSuccess" [class.text-red-700]="!submitSuccess"
            [class.border-red-200]="!submitSuccess" [class.border]="!submitSuccess">
            <i class="fa-solid mt-1" [class.fa-check-circle]="submitSuccess"
              [class.fa-triangle-exclamation]="!submitSuccess"></i>
            <div>{{ submitMessage }}</div>
          </div>

          <div class="grid md:grid-cols-2 gap-6">
            <div class="space-y-2">
              <label class="text-sm font-semibold text-gray-700 ml-1">Prénom</label>
              <input type="text" formControlName="firstName"
                class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all placeholder:text-gray-400"
                placeholder="Votre prénom">
              <div *ngIf="isFieldInvalid('firstName')" class="text-red-500 text-xs ml-1 flex items-center gap-1">
                <i class="fa-solid fa-circle-exclamation"></i> {{ getFieldError('firstName') }}
              </div>
            </div>

            <div class="space-y-2">
              <label class="text-sm font-semibold text-gray-700 ml-1">Nom</label>
              <input type="text" formControlName="lastName"
                class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all placeholder:text-gray-400"
                placeholder="Votre nom">
              <div *ngIf="isFieldInvalid('lastName')" class="text-red-500 text-xs ml-1 flex items-center gap-1">
                <i class="fa-solid fa-circle-exclamation"></i> {{ getFieldError('lastName') }}
              </div>
            </div>
          </div>

          <div class="grid md:grid-cols-2 gap-6">
            <div class="space-y-2">
              <label class="text-sm font-semibold text-gray-700 ml-1">Email</label>
              <input type="email" formControlName="email"
                class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all placeholder:text-gray-400"
                placeholder="votre.email@example.com">
              <div *ngIf="isFieldInvalid('email')" class="text-red-500 text-xs ml-1 flex items-center gap-1">
                <i class="fa-solid fa-circle-exclamation"></i> {{ getFieldError('email') }}
              </div>
            </div>

            <div class="space-y-2">
              <label class="text-sm font-semibold text-gray-700 ml-1">Téléphone</label>
              <input type="tel" formControlName="phone"
                class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all placeholder:text-gray-400"
                placeholder="06 00 00 00 00">
              <div *ngIf="isFieldInvalid('phone')" class="text-red-500 text-xs ml-1 flex items-center gap-1">
                <i class="fa-solid fa-circle-exclamation"></i> {{ getFieldError('phone') }}
              </div>
            </div>
          </div>

          <div class="space-y-2">
            <label class="text-sm font-semibold text-gray-700 ml-1">Sujet</label>
            <div class="relative">
              <select formControlName="subject"
                class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all appearance-none cursor-pointer bg-white text-gray-700">
                <option value="" disabled selected>Sélectionnez un sujet</option>
                <option value="general">Question générale</option>
                <option value="technical">Problème technique</option>
                <option value="membership">Demande d'adhésion</option>
                <option value="complaint">Réclamation</option>
                <option value="suggestion">Suggestion</option>
              </select>
              <div class="absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-gray-500">
                <i class="fa-solid fa-chevron-down text-xs"></i>
              </div>
            </div>
            <div *ngIf="isFieldInvalid('subject')" class="text-red-500 text-xs ml-1 flex items-center gap-1">
              <i class="fa-solid fa-circle-exclamation"></i> {{ getFieldError('subject') }}
            </div>
          </div>

          <div class="space-y-2">
            <label class="text-sm font-semibold text-gray-700 ml-1">Message</label>
            <textarea rows="5" formControlName="message"
              class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-brand-blue focus:ring-4 focus:ring-brand-blue/10 outline-none transition-all placeholder:text-gray-400 resize-none"
              placeholder="Comment pouvons-nous vous aider ?"></textarea>
            <div *ngIf="isFieldInvalid('message')" class="text-red-500 text-xs ml-1 flex items-center gap-1">
              <i class="fa-solid fa-circle-exclamation"></i> {{ getFieldError('message') }}
            </div>
          </div>

          <div class="space-y-2">
            <div
              class="flex items-start gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:bg-gray-100 transition-colors cursor-pointer"
              (click)="contactForm.get('consent')?.setValue(!contactForm.get('consent')?.value)">
              <div class="pt-1">
                <input type="checkbox" formControlName="consent" id="consent"
                  class="w-5 h-5 rounded border-gray-300 text-brand-blue focus:ring-brand-blue cursor-pointer">
              </div>
              <label for="consent" class="text-sm text-gray-600 cursor-pointer pointer-events-none">
                J'accepte que mes données personnelles soient utilisées pour traiter ma demande conformément à la
                <span class="text-brand-blue font-medium hover:underline">politique de confidentialité</span>.
              </label>
            </div>
            <div *ngIf="isFieldInvalid('consent')" class="text-red-500 text-xs ml-1 flex items-center gap-1">
              <i class="fa-solid fa-circle-exclamation"></i> {{ getFieldError('consent') }}
            </div>
          </div>

          <button type="submit" [disabled]="contactForm.invalid || isLoading"
            class="w-full btn-primary py-4 text-lg shadow-lg hover:shadow-xl hover:scale-[1.02] transform transition-all active:scale-[0.98]">
            <span *ngIf="!isLoading" class="flex items-center justify-center gap-2">
              Envoyer le Message <i class="fa-solid fa-paper-plane"></i>
            </span>
            <span *ngIf="isLoading" class="flex items-center justify-center gap-2">
              <i class="fa-solid fa-circle-notch fa-spin"></i> Envoi en cours...
            </span>
          </button>
        </form>
      </div>
    </div>
  </div>
</section>